<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Входящие - Яндекс.Почта</title>
    <link href="hw2.css" rel="stylesheet">
</head>
<body onload="sender();">

<script>
    n = 4;

    function sender() {

        let r = Math.floor(Math.random() * 590 + 10);
        console.log(r + " " + n);
        setTimeout(function () {
            sender();
            if (n < 30) {
                n++;
                myScrippp();
            }
        }, r * 1000);

    }
</script>

<div class="header">
    <div class="header__three_dashes">
        <div class="dash dash__first-dash"></div>
        <div class="dash dash__second-dash"></div>
        <div class="dash dash__third-dash"></div>
    </div>
    <img src="yandex_mail.png" class="header__logo">
    <label class="header__search">
        <input class="search__input-text" type="text" value="Поиск">
        <input class="search__input-button" type="button">
        <span class="search__cross"> X </span>
    </label>
    <script>
        function deleteMessages() {
            //document.getElementById("will-be-deleted").className = "message-block__deleted message-block__row message-block__central-row message-block_central-row-unread";
            var checks = document.querySelectorAll(".check__regular.check__input:checked");
            console.log(checks.length);
            var msgs = [];
            checks.forEach(function (element) {

                    console.log(element);
                    msgs.unshift(element.parentElement);
                    if (!element.parentElement.parentElement.matches(".message-block__deleted")) {

                        deleteMsg(element.parentElement.parentElement);
                        n -= 1;
                    }
                }
            )
            console.log(msgs.length);
        }

        function deleteMsg(msg) {
            msg.className = "message-block__deleted message-block__row message-block__central-row message-block_central-row-unread";
        }

        function addMes() {
            var newMessage = document.createElement('label');
            newMessage.htmlFor = "hidden-message__chb";
            //newMessage.className = "message-block__row message-block__new-message message-block__central-row message-block__central-row_unread  flag";
            newMessage.innerHTML = "\n" +
                "            <div class=\"message-block__row message-block__new-message message-block__central-row message-block__central-row_unread  flag\">\n" +
                "                <label class=\"check\">\n" +
                "                    <input class=\"check__input check__regular\" type=\"checkbox\">\n" +
                "                </label>\n" +
                "                <div class=\"central-row__avatar-frame\">\n" +
                "                    <div class=\"central-row__ya-circle\"><a class=\"ya-circle__ya-letter\">Я</a></div>\n" +
                "                </div>\n" +
                "                <div class=\"central-row__msg-sender\">Яндекс Паспорт</div>\n" +
                "                <div class=\"central-row__point\"></div>\n" +
                "                <div class=\"central-row__msg-theme\">Доступ к аккаунту восстановлен</div>\n" +
                "                <div class=\"central-row__date\">6 авг</div>\n" +
                "            </div>";
            let list = document.getElementsByClassName('main__message-block');
            let msgs = document.getElementsByClassName("message-block__central-row");
            list[0].insertBefore(newMessage, msgs[0].parentElement);
        }

        function animAdd() {
            document.getElementsByClassName("flag")[0].className = "new-message__appear  message-block__new-message message-block__row message-block__central-row message-block__central-row_unread message-block__new-message";
        }

        function myScrippp() {
            addMes();
            animAdd();
        }

        function setCheckBoxes() {
            let topBox = document.getElementsByClassName("check__input")[0];
            var boxes = document.getElementsByClassName("check__input check__regular");
            Array.from(boxes).forEach(function (box) {
                box.checked = topBox.checked;
            })
        }
    </script>

</div>
<div class="main">
    <div class="main__left-column">
        <form>
            <button class="left-column__btn_write">Написать</button>
        </form>
        <div class="left-column__btn-group">
            <button class="btn-group__control-button">Входящие</button>
            <button class="btn-group__control-button">Отправленные</button>
            <button class="btn-group__control-button">Удалённые</button>
            <button class="btn-group__control-button">Спам</button>
            <button class="btn-group__control-button">Черновики</button>
            <button class="btn-group__control-button">Создать папку</button>
        </div>
    </div>
    <div class="main__message-block">
        <div class="message-block__row message-block__upper-row">
            <label class="check">
                <input class="check__input" type="checkbox" onchange="setCheckBoxes()">
            </label>
            <button class="upper-row__btn tooltip">Переслать
                <span class="tooltip-text">Переслать</span>
            </button>
            <button class="upper-row__btn tooltip" onclick="deleteMessages()">Удалить
                <span class="tooltip-text">Удалить</span></button>
            <button class="upper-row__btn tooltip">Это спам
                <span class="tooltip-text">Удалить</span></button>
            <button class="upper-row__btn tooltip">Прочитано
                <span class="tooltip-text">Прочитано</span></button>
        </div>
        <label for="hidden-message__chb">
            <div class="message-block__row message-block__central-row message-block__central-row_unread">
                <label class="check">
                    <input class="check__input check__regular" type="checkbox">
                </label>
                <div class="central-row__avatar-frame">
                    <div class="central-row__ya-circle"><a class="ya-circle__ya-letter">Я</a></div>
                </div>
                <div class="central-row__msg-sender">Яндекс Паспорт</div>
                <div class="central-row__point"></div>
                <div class="central-row__msg-theme">Доступ к аккаунту восстановлен</div>
                <div class="central-row__date">6 авг</div>
            </div>
        </label>
        <input type="checkbox" id="hidden-message__chb">
        <div class="hidden-message">
            <label for="hidden-message__chb">
                <span class="hidden-message__cross">X</span>
            </label>
            <div class="hidden-message__text">
                Британцы – это кошки среднего размера, с крепким приземистым корпусом и массивными короткими лапами.
                У них массивная округлая голова, а мордочка слегка сглажена (но не приплюснута, как у персов).
                <img class="hidden-message__img" src="cat.jpg" alt="alt-img">
                Визитной карточкой британцев являются их пушистые толстые щечки, а также кожные складочки на животе
                и на
                короткой толстой шее.
                Глаза круглые, выразительные, чаще всего янтарно-желтого цвета, но могут встречаться голубой или
                изумрудный цвет.
                Средней длины толстый хвост слегка закруглен на конце.

                Отличительной особенностью породы является их плюшевая шерстка – такой эффект достигается за счет
                того,
                что остевой волос одинаковый по длине с подшерстком.
                Шерсть короткая, очень густая, не очень прилегает к телу. Что касается окрасов, то всего
                насчитывается
                около 60 вариантов:
                голубой, лиловый, черный, шоколадный, бежевый (циннамон или фавн), кремовый, черепаховый,
                шиншилловый
                (серебристый и золотистый),
                табби (пятнистый, тигровый, мраморный) и многие другие.
            </div>
        </div>


        <label for="hidden-message__chb">
            <div class="message-block__row message-block__central-row message-block__central-row_unread"
                 id="will-be-deleted">
                <label class="check">
                    <input class="check__input check__regular" type="checkbox">
                </label>
                <div class="central-row__avatar-frame">
                    <div class="central-row__ya-circle"><a class="ya-circle__ya-letter">Я</a></div>
                </div>
                <div class="central-row__msg-sender">Команда Яндекс.Почты</div>
                <div class="central-row__point"></div>
                <div class="central-row__msg-theme">Как читать почту с мобильного</div>
                <div class="central-row__date">6 июл</div>

            </div>
        </label>

        <label for="hidden-message__chb">
            <div class="message-block__row message-block__central-row message-block__central-row_read">
                <label class="check">
                    <input class="check__input check__regular" type="checkbox">
                </label>
                <div class="central-row__avatar-frame">
                    <div class="central-row__ya-circle"><a class="ya-circle__ya-letter">Я</a></div>
                </div>
                <div class="central-row__msg-sender">Команда Яндекс.Почты</div>
                <div class="central-row__point"></div>
                <div class="central-row__msg-theme">Как читать почту с мобильного</div>
                <div class="central-row__date">6 июл</div>
            </div>
        </label>

        <label for="hidden-message__chb">
            <div class="message-block__row message-block__central-row message-block__central-row_read">
                <label class="check">
                    <input class="check__input check__regular" type="checkbox">
                </label>
                <div class="central-row__avatar-frame">
                    <div class="central-row__ya-circle"><a class="ya-circle__ya-letter">Я</a></div>
                </div>
                <div class="central-row__msg-sender">Яндекс</div>
                <div class="central-row__point"></div>
                <div class="central-row__msg-theme">Соберите всю почту в этот ящик</div>
                <div class="central-row__date">6 июл</div>
            </div>

        </label>
        <div class="message-block__lower-row">
            <div class="lower-row__item">Помощь и обратная связь</div>
            <div class="lower-row__item">Реклама</div>
            <div class="lower-row__item">&copy2001-2018, Яндекс</div>
        </div>

    </div>
</div>

</body>
</html>